{"version":3,"file":"../datavis.min.js","sources":["datavis.min.js"],"sourcesContent":["/* global d3 */\n/* eslint-disable no-magic-numbers */\n\njQuery(document).ready(function($) {\n\n\t'use strict';\n\n\tfunction dataProfiles(id) {\n\t\tvar $id = $(\"#\" + id),\n\t\t\tmargin = 10,\n\t\t\tstrokeW = 2,\n\t\t\tnumFormat = d3.format(\",\"),\n\t\t\twidth = $id.width(),\n\t\t\tprofInRowMin = 2,\n\t\t\tidealX = 190,\n\t\t\tshift = { x: width < profInRowMin*idealX ? width/2 - margin : idealX, y: 125 },\n\t\t\tmaxFeature1 = $id.data(\"max-feature-1\") ? $id.data(\"max-feature-1\") : 90,\n\t\t\tmaxFeature2 = $id.data(\"max-feature-2\") ? $id.data(\"max-feature-2\") : 90,\n\t\t\tprofInRow = Math.max(Math.floor(width / shift.x), profInRowMin),\n\t\t\tscreenWidth = $(\"body\").width(),\n\t\t\tminWidth = idealX * profInRow,\n\t\t\tsmallBp = 500, // per _variables.scss\n\t\t\tmasterunit = $id.data(\"chart-masterunit\") ? $id.data(\"chart-masterunit\") : 500000,\n\t\t\thorUnits = 5,\n\t\t\tmoreHorUnits = width < minWidth ? 24 : 30,\n\t\t\tdata = $id.data(\"chart-raw\"),\n\t\t\tdataStart = $id.data(\"slice-start\"),\n\t\t\tdataEnd = $id.data(\"slice-end\"),\n\t\t\t// This is setup so properties/labels don't matter\n\t\t\t// But labels map to this order: circle, rectangle, ellipses\n\t\t\tlabels = $id.data(\"chart-labels\"),\n\t\t\tlegendLabelDistance = 45,\n\t\t\ticons = $id.data(\"chart-icons\"),\n\t\t\texcept = $id.data(\"chart-except\"),\n\t\t\texceptI = 0,\n\t\t\texceptLang = except ? data[labels[exceptI]] : \"\",\n\t\t\texceptHeightMulti = 3.5,\n\t\t\theight = except ? shift.y * exceptHeightMulti : yPos(null, dataEnd - dataStart -1) + shift.y;\n\n\t\tfunction yPos(d, i) {\n\t\t\tvar gutter = margin * 6,\n\t\t\t\ttopmargin = except ? 0 : margin * 5;\n\t\t\treturn topmargin + (shift.y + gutter) * Math.floor(i / profInRow);\n\t\t}\n\n\t\tfunction xPos(d, i) {\n\t\t\treturn i % profInRow * shift.x;\n\t\t}\n\n\t\tfunction fAttr(sel, shape, i, attr) {\n\t\t\treturn parseFloat(sel.selectAll(shape).nodes()[i].getAttribute(attr));\n\t\t}\n\n\t\tfunction addVis() {\n\t\t\tif (!data) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction editorsConstruct(g) {\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"profile-feature1\")\n\t\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"circle\")\n\t\t\t\t\t.attr(\"cx\", function(d, i) {return except ? xPos(d, i) + Math.max(width/4, editorScale(d[labels[1]]) + margin) : xPos(d, i) + editorScale(d[labels[1]])})\n\t\t\t\t\t.attr(\"cy\", function(d, i) {return yPos(d, i) + editorScale(d[labels[1]])})\n\t\t\t\t\t.attr(\"r\", function(d) {return editorScale(d[labels[1]])})\n\t\t\t}\n\n\t\t\tfunction articlesConstruct(g, e) {\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"profile-feature2\")\n\t\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"x\", function(d, i) {\n\t\t\t\t\t\tvar normalPosX = fAttr(e, \"circle\", i, \"cx\") + fAttr(e, \"circle\", i, \"r\") + margin/2,\n\t\t\t\t\t\t\texceptPosX = width*0.4 + (width/2-articleScale(d[labels[2]])*0.75)/2,\n\t\t\t\t\t\t\tposX = except ? exceptPosX : normalPosX,\n\t\t\t\t\t\t\tsmallPosX = fAttr(e, \"circle\", i, \"cx\") + fAttr(e, \"circle\", i, \"r\") + margin * 3;\n\t\t\t\t\t\treturn width < minWidth && except ? smallPosX : posX;\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"width\", function(d) {return articleScale(d[labels[2]])*0.75})\n\t\t\t\t\t.attr(\"height\", function(d) {return articleScale(d[labels[2]])})\n\t\t\t\t\t.attr(\"rx\", function(d) {return articleScale(d[labels[2]])*0.08})\n\t\t\t\t\t.attr(\"ry\", function(d) {return articleScale(d[labels[2]])*0.08});\n\t\t\t}\n\n\t\t\tfunction viewsConstruct(g, e, a) {\n\t\t\t\tg.attr(\"class\", \"profile-feature3\");\n\t\t\t\t/* eslint-disable no-loop-func, one-var */\n\t\t\t\tfor (var ix = 0; ix < ddata.length; ix++) {\n\t\t\t\t\tvar ry = viewsUnitScale(masterunit) / 3 * 2,\n\t\t\t\t\t\tnormalPosX = fAttr(a, \"rect\", ix, \"x\") + fAttr(a, \"rect\", ix, \"width\") + margin,\n\t\t\t\t\t\tnormalPosY = fAttr(a, \"rect\", ix, \"y\") + ry,\n\t\t\t\t\t\texceptPosX = (width - viewsXScale(moreHorUnits)) / 2, // center\n\t\t\t\t\t\texceptPosY = fAttr(e, \"circle\", ix, \"cx\") + fAttr(e, \"circle\", ix, \"r\") + legendLabelDistance + margin * 2,\n\t\t\t\t\t\ttransX = except ? exceptPosX : normalPosX,\n\t\t\t\t\t\ttransY = except ? exceptPosY : normalPosY;\n\n\t\t\t\t\tg\n\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t.attr(\"class\", \"viewsContainer\")\n\t\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t\t.selectAll(\"ellipse\")\n\t\t\t\t\t\t.data(ddata[ix].unitArray)\n\t\t\t\t\t\t.join(\"ellipse\")\n\t\t\t\t\t\t.attr(\"class\", \"views-\" + ix)\n\t\t\t\t\t\t.attr(\"cx\", function(d) {return transX + viewsXScale(d.x)})\n\t\t\t\t\t\t.attr(\"cy\", function(d) {return transY + viewsYScale(d.y)})\n\t\t\t\t\t\t.attr(\"rx\", function(d) {return viewsUnitScale(d.value)})\n\t\t\t\t\t\t.attr(\"ry\", function(d) {return viewsUnitScale(d.value)/3*2});\n\t\t\t\t\t/* eslint-disable no-loop-func, one-var */\n\t\t\t\t}\n\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction labelConstruct(g, e, offset) {\n\t\t\t\tvar labelX = except ? margin*exceptHeightMulti + margin : margin * 2,\n\t\t\t\t\tlabelY = except ? height - margin : shift.y*0.75 + margin;\n\t\t\t\treturn g\n\t\t\t\t\t.call(function(g1) {\n\t\t\t\t\t\treturn g1\n\t\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t\t.attr(\"class\", \"main-labels\")\n\t\t\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t\t\t.data(ddata)\n\t\t\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t\t\t\t\t.attr(\"dy\", -5) // create some padding at the bottom\n\t\t\t\t\t\t\t.attr(\"x\", function(d, i) {return screenWidth < smallBp ? xPos(d, i) + margin : xPos(d, i) + labelX})\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i) + labelY})\n\t\t\t\t\t\t\t.text(function(d) {return labels.length > 4 ? d[labels[4]] : d[labels[0]] })\n\t\t\t\t\t})\n\t\t\t\t\t.call(function(g2) {\n\t\t\t\t\t\treturn g2\n\t\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t\t.attr(\"class\", \"main-label-ranks\")\n\t\t\t\t\t\t\t.style(\"display\", \"none\")\n\t\t\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t\t\t.data(ddata)\n\t\t\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t\t\t\t\t.attr(\"dy\", -30) // above mainlabel\n\t\t\t\t\t\t\t.attr(\"x\", function(d, i) {return screenWidth < smallBp ? xPos(d, i) + margin : xPos(d, i) + labelX})\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i) + labelY})\n\t\t\t\t\t\t\t.text(function(d, i) {return i + 1 + offset});\n\t\t\t\t\t})\n\t\t\t}\n\n\n\t\t\tfunction borderleft(g) {\n\t\t\t\tvar borderHeight = except ? height : shift.y - margin,\n\t\t\t\t\tendX = except ? margin * exceptHeightMulti : margin;\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"stroke-width\", strokeW)\n\t\t\t\t\t.attr(\"class\", \"borderleft\")\n\t\t\t\t\t.selectAll(\"line\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"line\")\n\t\t\t\t\t.attr(\"x1\", function(d, i) {return xPos(d, i) + strokeW})\n\t\t\t\t\t.attr(\"x2\", function(d, i) {return screenWidth < smallBp ? xPos(d, i) + strokeW : xPos(d, i) + endX})\n\t\t\t\t\t.attr(\"y1\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"y2\", function(d, i) {return yPos(d, i) + borderHeight});\n\t\t\t}\n\n\t\t\tfunction legendConstruct(g, e, a, v) {\n\t\t\t\tvar datalabelText,\n\t\t\t\t\tdatalabelIcons,\n\t\t\t\t\td0 = ddata[0],\n\t\t\t\t\taObj = {\n\t\t\t\t\t\tx: fAttr(a, \"rect\", 0, \"x\"),\n\t\t\t\t\t\ty: fAttr(a, \"rect\", 0, \"y\"),\n\t\t\t\t\t\tw: fAttr(a, \"rect\", 0, \"width\"),\n\t\t\t\t\t\th: fAttr(a, \"rect\", 0, \"height\"),\n\t\t\t\t\t},\n\t\t\t\t\tvx1 = fAttr(v, \"ellipse\", moreHorUnits-1, \"cx\"),\n\t\t\t\t\tvxCenter = fAttr(v, \"ellipse\", Math.floor(moreHorUnits/2) - 1, \"cx\"),\n\t\t\t\t\tvy1 = fAttr(v, \"ellipse\", moreHorUnits * (d0.Rows - 1), \"cy\"),\n\t\t\t\t\tlastRowOverHalf = moreHorUnits * d0.Rows % d0.unitArray.length > Math.ceil(moreHorUnits/2) + 1,\n\t\t\t\t\tmarginBottom = 60,\n\t\t\t\t\tcustomLegend = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tx: fAttr(e, \"circle\", 0, \"cx\"),\n\t\t\t\t\t\t\ty: fAttr(e, \"circle\", 0, \"cy\") + fAttr(e, \"circle\", 0, \"r\") - margin,\n\t\t\t\t\t\t\ty2: height - marginBottom,\n\t\t\t\t\t\t\th: legendLabelDistance,\n\t\t\t\t\t\t\tclass: 1,\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[1]]) + \" \" + labels[1]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: aObj.x + aObj.w * 0.5,\n\t\t\t\t\t\t\ty: aObj.y + aObj.h - margin,\n\t\t\t\t\t\t\ty2: height - marginBottom,\n\t\t\t\t\t\t\th: legendLabelDistance,\n\t\t\t\t\t\t\tclass: 2,\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[2]]) + \" \" + labels[2]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: vxCenter,\n\t\t\t\t\t\t\ty: lastRowOverHalf ? vy1 : vy1 + margin,\n\t\t\t\t\t\t\ty2: height - marginBottom * 1.5,\n\t\t\t\t\t\t\th: legendLabelDistance,\n\t\t\t\t\t\t\tclass: 3,\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[3]]) + \" \" + labels[3]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: vx1,\n\t\t\t\t\t\t\ty: vy1 - viewsUnitScale.range()[1] * 2,\n\t\t\t\t\t\t\ty2: height - marginBottom * 2,\n\t\t\t\t\t\t\th: legendLabelDistance/2,\n\t\t\t\t\t\t\tclass: 3,\n\t\t\t\t\t\t\thighlight: false,\n\t\t\t\t\t\t\tname: [numFormat(masterunit), labels[3]]\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\tg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"data-label-lines\")\n\t\t\t\t\t.selectAll(\"line\")\n\t\t\t\t\t.data(customLegend)\n\t\t\t\t\t.join(\"line\")\n\t\t\t\t\t.attr(\"class\", function(d) {return \"profile-feature\" + d.class})\n\t\t\t\t\t.attr(\"x1\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"x2\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"y1\", function(d) {return d.y})\n\t\t\t\t\t.attr(\"y2\", function(d) {return d.y + d.h})\n\t\t\t\t\t.attr(\"stroke-dasharray\", function(d) {return d.highlight ? \"\" : margin/3 + \",\" + margin/4});\n\n\t\t\t\tdatalabelText = g\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"data-label-text\")\n\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t.data(customLegend)\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.attr(\"class\", function(d) {return \"profile-feature\" + d.class})\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.y + d.h})\n\t\t\t\t\t.attr(\"dy\", margin * 1.5)\n\t\t\t\t\t.attr(\"stroke-width\", 0)\n\t\t\t\t\t.attr(\"font-weight\", function(d) {return d.highlight ? \"bold\" : \"normal\"})\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\");\n\n\t\t\t\tdatalabelText\n\t\t\t\t\t.append(\"tspan\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"dx\", viewsUnitScale.range()[1])\n\t\t\t\t\t.text(function(d) {return d.name[0]});\n\n\t\t\t\tdatalabelText\n\t\t\t\t\t.append(\"tspan\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"dy\", 16)\n\t\t\t\t\t.attr(\"dx\", viewsUnitScale.range()[1])\n\t\t\t\t\t.text(function(d) {return d.name[1]});\n\n\t\t\t\tdatalabelIcons = g\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"data-label-icon\");\n\n\t\t\t\tdatalabelText.selectAll(\"tspan\").each(function(dd, i) {\n\t\t\t\t\tif (i === 0 && dd.highlight) {\n\t\t\t\t\t\tvar textWidth = this.getBBox().width;\n\t\t\t\t\t\tdatalabelIcons.call(function(ltext) {\n\t\t\t\t\t\t\treturn ltext\n\t\t\t\t\t\t\t\t.append(\"image\")\n\t\t\t\t\t\t\t\t.attr(\"class\", \"profile-feature\" + dd.class)\n\t\t\t\t\t\t\t\t.attr(\"xlink:href\", icons[dd.class - 1])\n\t\t\t\t\t\t\t\t.attr(\"width\", margin * 1.1)\n\t\t\t\t\t\t\t\t.attr(\"height\", margin * 1.1)\n\t\t\t\t\t\t\t\t.attr(\"x\", dd.x - textWidth/2 - margin)\n\t\t\t\t\t\t\t\t.attr(\"y\", dd.y + dd.h + margin * 0.5);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction mappedViewsData(_data) {\n\t\t\t\treturn _data.map(function(p, index) {\n\t\t\t\t\tvar unitSum = Math.floor(p[labels[3]]/masterunit),\n\t\t\t\t\t\tremain = p[labels[3]] % masterunit,\n\t\t\t\t\t\tspecHorUnits = index === exceptI ? moreHorUnits : horUnits,\n\t\t\t\t\t\trows = Math.ceil(unitSum/specHorUnits);\n\t\t\t\t\tp.unitArray = [];\n\t\t\t\t\tfor (var i = 0; i < rows; i++) { // eslint-disable-line one-var\n\t\t\t\t\t\tfor (var h = 0; h < specHorUnits; h++) { // eslint-disable-line one-var\n\t\t\t\t\t\t\tp.unitArray.push({ x: h, y: i, value: masterunit })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tp.unitArray = p.unitArray.slice(0, unitSum); // only take the amount of spaces needed\n\t\t\t\t\tp.unitArray[p.unitArray.length-1].value = remain; // last space is the remainder, not a full masterunit\n\t\t\t\t\tp.Rows = rows;\n\t\t\t\t\treturn p;\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tfunction hover(g, index, e, a, v) { //eslint-disable-line max-params\n\t\t\t\tif (index === null) return g\n\t\t\t\t\t.transition()\n\t\t\t\t\t.attr(\"opacity\", 0)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.style(\"display\", \"none\");\n\n\t\t\t\tvar editXPos = fAttr(e, \"circle\", index, \"cx\"),\n\t\t\t\t\tartXPos = fAttr(a, \"rect\", index, \"x\"),\n\t\t\t\t\tartW = fAttr(a, \"rect\", index, \"width\"),\n\t\t\t\t\tposInRow = fAttr(v, \".views-\" + index, Math.min(Math.floor(horUnits/2), ddata[index].unitArray.length - 1), \"cx\") + margin,\n\t\t\t\t\tsize = margin,\n\t\t\t\t\tshiftSmScreens = width < minWidth ? 20 : 0,\n\t\t\t\t\thoverLabels = [{\n\t\t\t\t\t\tvalue: ddata[index][labels[1]],\n\t\t\t\t\t\tx: Math.round(editXPos + margin),\n\t\t\t\t\t\ty1: yPos(null, index) + margin,\n\t\t\t\t\t\th: 36,\n\t\t\t\t\t\tlabelPos: [editXPos, yPos(null, index) - 36]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: ddata[index][labels[2]],\n\t\t\t\t\t\tx: Math.round(artXPos + margin + artW/2),\n\t\t\t\t\t\ty1: yPos(null, index) + margin,\n\t\t\t\t\t\th: 21,\n\t\t\t\t\t\tlabelPos: [artXPos + artW / 2, yPos(null, index) - 21]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: ddata[index][labels[3]],\n\t\t\t\t\t\tx: Math.round(posInRow),\n\t\t\t\t\t\ty1: yPos(null, index) + viewsUnitScale.range()[1]*2,\n\t\t\t\t\t\th: 6,\n\t\t\t\t\t\tlabelPos: [posInRow - margin - shiftSmScreens, yPos(null, index) - 6]\n\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\tg\n\t\t\t\t\t.transition()\n\t\t\t\t\t.attr(\"opacity\", 1)\n\t\t\t\t\t.style(\"display\", null)\n\t\t\t\t\t.style(\"pointer-events\", \"none\")\n\n\t\t\t\tg.selectAll(\"line\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"line\")\n\t\t\t\t\t.attr(\"class\", \"hover-label-lines\")\n\t\t\t\t\t.attr(\"x1\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"x2\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"y1\", function(d) {return d.y1})\n\t\t\t\t\t.attr(\"y2\", function(d) {return d.y1 - d.h})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\n\t\t\t\tg.selectAll(\"text\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.labelPos[0]})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.labelPos[1]})\n\t\t\t\t\t.attr(\"dy\", margin*0.5)\n\t\t\t\t\t.attr(\"dx\", margin*1.8)\n\t\t\t\t\t.text(function(d) {return numFormat(d.value)})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\n\t\t\t\tif (labels.length > 4) g.append(\"text\")\n\t\t\t\t\t.attr(\"x\", screenWidth < smallBp ? xPos(0, index) : xPos(0, index) + margin)\n\t\t\t\t\t.attr(\"y\", yPos(null, index) + shift.y)\n\t\t\t\t\t.attr(\"dy\", -margin)\n\t\t\t\t\t.attr(\"dx\", margin)\n\t\t\t\t\t.text(ddata[index][labels[0]]);\n\n\t\t\t\tg.selectAll(\"image\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"image\")\n\t\t\t\t\t.attr(\"xlink:href\", function(d, i) {return icons[i]})\n\t\t\t\t\t.attr(\"width\", size)\n\t\t\t\t\t.attr(\"height\", size)\n\t\t\t\t\t.attr(\"x\", function(d) {return d.labelPos[0] + margin*0.5})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.labelPos[1] - size*0.5})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction checkBoxStates() {\n\t\t\t\tfor (var i = 0; i < checks.length; i++) {\n\t\t\t\t\tvar $elem = $(\".profile-feature\" + (i + 1));\n\t\t\t\t\tif (checks[i].is(\":checked\")) {\n\t\t\t\t\t\t$elem.fadeIn();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$elem.fadeOut();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!checks[0].is(\":checked\") && !checks[1].is(\":checked\") && !checks[2].is(\":checked\")) {$(\".main-label-ranks\").fadeIn()}\n\t\t\t\telse {$(\".main-label-ranks\").fadeOut()}\n\t\t\t}\n\n\t\t\tvar svg,\n\t\t\t\teditors,\n\t\t\t\tarticles,\n\t\t\t\tviews,\n\t\t\t\ttooltip,\n\t\t\t\tcontainer = d3.select(\"#\" + id),\n\t\t\t\tchecks = [$(\"#feature1\"), $(\"#feature2\"), $(\"#feature3\")],\n\t\t\t\taspect = width / height,\n\t\t\t\tmappedData = mappedViewsData(data),\n\t\t\t\tddata = mappedData.slice(dataStart, dataEnd),\n\t\t\t\tmaxRows = d3.max(mappedData, function(d) { return d.Rows }),\n\t\t\t\tunitR = 4,\n\t\t\t\teditorScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d[labels[1]] })])\n\t\t\t\t\t.range([0, maxFeature1]), //min and max radius of circle\n\t\t\t\tarticleScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d[labels[2]] })])\n\t\t\t\t\t.range([0, maxFeature2]), //min and max height of rect\n\t\t\t\tviewsUnitScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, masterunit])\n\t\t\t\t\t.range([0, unitR]), // min and max size of of 1 unit\n\t\t\t\tviewsYScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, maxRows])\n\t\t\t\t\t.range([0, maxRows * unitR * 2]), // min and max space for rows\n\t\t\t\tviewsXScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, horUnits])\n\t\t\t\t\t.range([0, horUnits * unitR * 2.5]), // min and max space for columns\n\t\t\t\tminHeight = editorScale.range()[1] * 2 + viewsYScale.range()[1] + (legendLabelDistance + margin) * 4;\n\n\t\t\theight = except && height < minHeight ? minHeight : height; // update\n\t\t\texceptHeightMulti = height/shift.y; // update\n\n\t\t\tsvg = container.append(\"svg\")\n\t\t\t\t.attr(\"width\", width)\n\t\t\t\t.attr(\"height\", height)\n\t\t\t\t.attr(\"perserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.attr(\"viewBox\", \"0 0 \" + width + \" \" + height);\n\n\t\t\t// lazy resize, keeps proportions\n\t\t\t$( window ).resize(function(){\n\t\t\t\tvar targetWidth = container.node().getBoundingClientRect().width;\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"width\", targetWidth);\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"height\", targetWidth / aspect);\n\t\t\t});\n\n\t\t\teditors = svg.append(\"g\").call(editorsConstruct);\n\t\t\tarticles = svg.append(\"g\").call(articlesConstruct, editors);\n\t\t\tviews = svg.append(\"g\").call(viewsConstruct, editors, articles);\n\n\t\t\tsvg.append(\"g\").call(labelConstruct, editors, dataStart);\n\t\t\tsvg.append(\"g\").call(borderleft);\n\n\t\t\tif (except) {\n\t\t\t\tsvg.append(\"g\").call(legendConstruct, editors, articles, views);\n\t\t\t} else {\n\t\t\t\ttooltip = svg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"tooltip\");\n\n\t\t\t\tsvg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"opacity\", 0)\n\t\t\t\t\t.attr(\"class\", \"tooltipgrid\")\n\t\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"class\", \"hover\")\n\t\t\t\t\t.attr(\"x\", function(d, i) {return xPos(d, i)})\n\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"width\", shift.x)\n\t\t\t\t\t.attr(\"height\", shift.y)\n\t\t\t\t\t.on(\"touchstart mouseover\", function(_, i) {\n\t\t\t\t\t\tif (ddata[i][labels[0]] === exceptLang) return;\n\t\t\t\t\t\ttooltip\n\t\t\t\t\t\t\t.call(hover, i, editors, articles, views);\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"touchend mouseout\", function() {tooltip.call(hover, null)});\n\n\t\t\t\t// applies to all, but only runs once\n\t\t\t\t$(\".chart-options input[type='checkbox']\").click(checkBoxStates);\n\t\t\t\tcheckBoxStates();\n\t\t\t}\n\t\t}\n\n\t\taddVis();\n\t}\n\n\t$(\".d3-dataprofiles\").each(function() {\n\t\tdataProfiles(this.id);\n\t});\n\n\n});\n/* global d3 */\n/* eslint-disable no-magic-numbers */\n\njQuery(document).ready(function($) {\n\n\t'use strict';\n\n\tfunction lineChart(id) {\n\t\tvar $id = $(\"#\" + id),\n\t\t\tmobileThresh = 762,\n\t\t\tisMobile = $(window).width() < mobileThresh,\n\t\t\tmargin = { top: 30, right: isMobile ? 20 : 60, bottom: 60, left: 40 },\n\t\t\torigWidth = $id.width(),\n\t\t\twidth = origWidth - margin.left - margin.right,\n\t\t\torigHeight = 300,\n\t\t\theight = origHeight - margin.top - margin.bottom,\n\t\t\tstrokeWidth = 1.5,\n\t\t\tcircleDiameter = 4,\n\t\t\taccentColorClass = $id.data(\"stroke-color\"),\n\t\t\ttimeFormatPrefs = $id.data(\"time-format\") === \"month\" ? { month: \"long\" } : { month: \"short\", day: \"numeric\", year: \"numeric\" },\n\t\t\tparseTimeFormat = d3.timeParse(\"%Y-%m-%d\"),\n\t\t\tdataRaw = $id.data(\"chart-raw\"),\n\t\t\tdata = dataRaw ? dataRaw.map(parseDates) : null;\n\n\t\tfunction parseDates(wp) {\n\t\t\twp.date = parseTimeFormat(wp.date);\n\t\t\treturn wp;\n\t\t}\n\n\t\tfunction callout(g, value, xPos, evnt) {\n\t\t\tif (!value) return g.style(\"display\", \"none\");\n\t\t\tg\n\t\t\t\t.attr(\"class\", \"tooltip\")\n\t\t\t\t.style(\"display\", null)\n\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\tvar borderRadius = 2,\n\t\t\t\tlineHeight = 1.2,\n\t\t\t\trect = g.selectAll(\"rect\")\n\t\t\t\t\t.data([null])\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"rx\", borderRadius)\n\t\t\t\t\t.attr(\"ry\", borderRadius),\n\t\t\t\ttext = g.selectAll(\"text\")\n\t\t\t\t\t.data([null])\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.call(function(t) {\n\t\t\t\t\t\treturn t\n\t\t\t\t\t\t\t.selectAll(\"tspan\")\n\t\t\t\t\t\t\t.data(value.split(/\\n/))\n\t\t\t\t\t\t\t.join(\"tspan\")\n\t\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return i * lineHeight + \"em\" })\n\t\t\t\t\t\t\t.style(\"font-weight\", function(_, i) { return i ? null : \"bold\" })\n\t\t\t\t\t\t\t.text(function(d) { return d; })\n\t\t\t\t\t}),\n\t\t\t\tbbox = text.node().getBBox(),\n\t\t\t\tw = bbox.width,\n\t\t\t\th = bbox.height,\n\t\t\t\tttipMar = 10,\n\t\t\t\ttotalMar = ttipMar * 2,\n\t\t\t\tshift = 2;\n\n\t\t\tg.selectAll(\"circle\")\n\t\t\t\t.data([null])\n\t\t\t\t.join(\"circle\")\n\t\t\t\t.attr(\"r\", circleDiameter)\n\t\t\t\t.attr(\"stroke-width\", strokeWidth)\n\t\t\t\t.attr(\"fill\", evnt ? \"none\" : \"white\")\n\n\t\t\trect.attr(\"width\", w + totalMar).attr(\"height\", h + totalMar)\n\n\t\t\tif (xPos + w > width) {\n\t\t\t\ttext.attr(\"transform\", \"translate(\" + (-w - totalMar) + \",\" + -((h - totalMar) / 2 - shift) + \")\");\n\t\t\t\trect.attr(\"x\", -(w + ttipMar + totalMar)).attr(\"y\", -(h + totalMar) / 2);\n\t\t\t} else {\n\t\t\t\ttext.attr(\"transform\", \"translate(\" + totalMar + \",\" + -((h - totalMar) / 2 - shift) + \")\");\n\t\t\t\trect.attr(\"x\", ttipMar).attr(\"y\", -(h + totalMar) / 2);\n\t\t\t}\n\n\t\t\treturn g;\n\t\t}\n\n\t\tfunction addVis() {\n\t\t\tif (!data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar svg,\n\t\t\t\tticks = { x: 0, y: 4 },\n\t\t\t\tx = d3.scaleTime()\n\t\t\t\t\t.nice()\n\t\t\t\t\t.domain(d3.extent(data, function(d) { return d.date; }))\n\t\t\t\t\t.range([0, width]),\n\t\t\t\txAxis = function(g) {\n\t\t\t\t\tg\n\t\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")\n\t\t\t\t\t\t.call(d3.axisBottom(x)\n\t\t\t\t\t\t\t.ticks(d3.timeMonth, 1)\n\t\t\t\t\t\t\t.tickFormat(isMobile ? d3.timeFormat(\"%b\") : d3.timeFormat(\"%B\")))\n\t\t\t\t\t\t.call(function(h) { h.select(\".domain\").remove(); })\n\t\t\t\t},\n\t\t\t\ty = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d.value; })])\n\t\t\t\t\t.range([height, 0]),\n\t\t\t\tyAxis = function(g) {\n\t\t\t\t\tg\n\t\t\t\t\t\t.attr(\"class\", \"yAxis\")\n\t\t\t\t\t\t.call(d3.axisLeft(y)\n\t\t\t\t\t\t\t.ticks(ticks.y)\n\t\t\t\t\t\t\t.tickFormat(d3.format(\".2s\"))\n\t\t\t\t\t\t\t.tickSize(-1 * width))\n\t\t\t\t\t\t.call(function(h) { h.select(\".domain\").remove(); })\n\t\t\t\t},\n\t\t\t\tbisectDate = function(mx) {\n\t\t\t\t\tvar bisect = d3.bisector(function(d) { return d.date }).left,\n\t\t\t\t\t\tdate = x.invert(mx),\n\t\t\t\t\t\tindex = bisect(data, date, 1),\n\t\t\t\t\t\ta = data[index - 1],\n\t\t\t\t\t\tb = data[index];\n\t\t\t\t\treturn date - a.date > b.date - date ? b : a;\n\t\t\t\t},\n\t\t\t\ttooltip,\n\t\t\t\tcontainer = d3.select(\"#\" + id),\n\t\t\t\taspect = origWidth / origHeight;\n\n\t\t\tsvg = container.append(\"svg\")\n\t\t\t\t.attr(\"width\", origWidth)\n\t\t\t\t.attr(\"height\", origHeight)\n\t\t\t\t.attr(\"perserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.attr(\"viewBox\", \"0 0 \" + origWidth + \" \" + origHeight)\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t\t\t// lazy resize, keeps proportions\n\t\t\t$( window ).resize(function() {\n\t\t\t\tvar targetWidth = container.node().getBoundingClientRect().width;\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"width\", targetWidth);\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"height\", targetWidth / aspect);\n\t\t\t});\n\n\t\t\tsvg.append(\"g\").call(xAxis);\n\t\t\tsvg.append(\"g\").call(yAxis);\n\n\t\t\tsvg.append(\"path\")\n\t\t\t\t.datum(data)\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.attr(\"stroke-width\", strokeWidth)\n\t\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t\t.attr(\"class\", \"line \" + accentColorClass)\n\t\t\t\t.attr(\"d\", d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date) })\n\t\t\t\t\t.y(function(d) { return y(d.value) })\n\t\t\t\t);\n\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t.data(data.filter(function(d) { return d.event; }))\n\t\t\t\t.enter(\"circle\")\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\", \"circle \" + accentColorClass)\n\t\t\t\t.attr(\"r\", circleDiameter)\n\t\t\t\t.attr(\"cx\", function(d) { return x(d.date); })\n\t\t\t\t.attr(\"cy\", function(d) { return y(d.value); });\n\n\t\t\ttooltip = svg.append(\"g\");\n\n\t\t\tsvg.append('rect')\n\t\t\t\t.attr(\"class\", \"overlay\")\n\t\t\t\t.attr(\"pointer-events\", \"all\")\n\t\t\t\t.attr('x', 0)\n\t\t\t\t.attr('y', 0)\n\t\t\t\t.attr('width', width)\n\t\t\t\t.attr('height', height)\n\t\t\t\t.on(\"touchmove mousemove\", function() {\n\t\t\t\t\tvar hoverD = bisectDate(d3.mouse(this)[0]),\n\t\t\t\t\t\tcontext = hoverD.date.toLocaleString(undefined, timeFormatPrefs) + \"\\n\" + d3.format(\",\")(hoverD.value);\n\t\t\t\t\ttooltip\n\t\t\t\t\t\t.attr(\"transform\", \"translate(\" + x(hoverD.date) + \",\" + y(hoverD.value) + \")\")\n\t\t\t\t\t\t.call(callout, context, x(hoverD.date), hoverD.event);\n\t\t\t\t\tif (hoverD.event) {\n\t\t\t\t\t\t$(\"#label-date\").text(hoverD.date.toLocaleString(undefined, timeFormatPrefs));\n\t\t\t\t\t\t$(\"#label-name\").text(hoverD.event);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"opacity\", 1);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"max-height\", 10 + \"rem\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"opacity\", 0);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"max-height\", 2 + \"rem\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"touchend mouseleave\", function() {\n\t\t\t\t\ttooltip.call(callout, null);\n\t\t\t\t});\n\t\t}\n\n\t\taddVis();\n\n\t}\n\n\t$(\".d3-linechart\").each(function() {\n\t\tlineChart(this.id);\n\t});\n\n\n});"],"names":["jQuery","document","ready","$","dataProfiles","id","editors","articles","views","tooltip","container","checks","aspect","ddata","editorScale","articleScale","viewsUnitScale","viewsYScale","viewsXScale","$id","margin","numFormat","d3","format","width","shift","x","profInRowMin","y","maxFeature1","data","maxFeature2","profInRow","Math","max","floor","screenWidth","minWidth","smallBp","masterunit","moreHorUnits","dataStart","dataEnd","labels","legendLabelDistance","icons","except","exceptLang","exceptHeightMulti","height","yPos","d","i","xPos","fAttr","sel","shape","attr","parseFloat","selectAll","nodes","getAttribute","hover","g","index","e","a","v","transition","style","editXPos","artXPos","artW","posInRow","min","horUnits","unitArray","length","shiftSmScreens","hoverLabels","value","round","y1","h","labelPos","range","join","is","text","append","size","checkBoxStates","$elem","fadeIn","fadeOut","select","mappedData","map","p","unitSum","remain","specHorUnits","rows","ceil","push","slice","Rows","maxRows","scaleLinear","domain","minHeight","svg","window","resize","targetWidth","node","getBoundingClientRect","call","normalPosX","exceptPosX","posX","smallPosX","ix","ry","normalPosY","exceptPosY","transX","transY","offset","labelX","labelY","g1","g2","borderHeight","endX","datalabelIcons","d0","aObj","vx1","vxCenter","vy1","lastRowOverHalf","customLegend","y2","class","highlight","name","marginBottom","datalabelText","each","dd","textWidth","this","getBBox","ltext","on","_","click","lineChart","isMobile","origWidth","strokeWidth","circleDiameter","accentColorClass","timeFormatPrefs","month","day","year","parseTimeFormat","timeParse","dataRaw","wp","date","callout","evnt","rect","t","split","bbox","w","ttipMar","ticks","scaleTime","nice","extent","axisBottom","timeMonth","tickFormat","timeFormat","remove","axisLeft","tickSize","datum","line","filter","event","enter","mx","mouse","bisect","bisector","left","invert","b","hoverD","context","toLocaleString","undefined","css","addVis"],"mappings":"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"}