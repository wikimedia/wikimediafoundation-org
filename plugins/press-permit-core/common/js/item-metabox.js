var wpNavMenu;!function(e){var t=wpNavMenu={init:function(){this.jQueryExtensions(),this.attachQuickSearchListeners(),this.attachTabsPanelListeners(),this.initToggles()},jQueryExtensions:function(){e.fn.extend({getItemData:function(){var e={};return e["menu-item-object-id"]=this.find("input.menu-item-checkbox").val(),e["menu-item-title"]=this.find("label").html(),e}})},initToggles:function(){postboxes.add_postbox_toggles("nav-menus")},attachQuickSearchListeners:function(){var n;e(".quick-search").keypress(function(a){var i=e(this);if(13==a.which)return t.updateQuickSearchResults(i),!1;n&&clearTimeout(n),n=setTimeout(function(){t.updateQuickSearchResults(i)},400)}).attr("autocomplete","off")},updateQuickSearchResults:function(n){var a,i,s=n.val();s.length<2||(a=n.parents(".tabs-panel"),i={action:"menu-quick-search","response-format":"markup",menu:e("#menu").val(),"menu-settings-column-nonce":e("#menu-settings-column-nonce").val(),q:s,type:n.attr("name")},e(".spinner",a).show(),e.post(ppItems.ajaxurl,i,function(e){t.processQuickSearchQueryResponse(e,i,a)}))},attachTabsPanelListeners:function(){e("#menu-settings-column").on("click",function(t){var n,a,i,s,r=e(t.target);if(r.hasClass("nav-tab-link"))return!(!(a=/#(.*)$/.exec(t.target.href))||!a[1])&&(a=a[1],i=r.parents(".inside").first(),e("input",i).prop("checked",!1),e(".tabs-panel-active",i).removeClass("tabs-panel-active").addClass("tabs-panel-inactive"),e("#"+a,i).removeClass("tabs-panel-inactive").addClass("tabs-panel-active"),e(".tabs",i).removeClass("tabs"),r.parent().addClass("tabs"),e(".quick-search",i).focus(),!1);if(r.hasClass("select-all")){if((n=/#(.*)$/.exec(t.target.href))&&n[1])return s=e("#"+n[1]+" .tabs-panel-active input.menu-item-checkbox"),s.length===s.filter(":checked").length?s.prop("checked",!1):s.prop("checked",!0),!1}else if(r.hasClass("page-numbers"))return e.post(ppItems.ajaxurl,t.target.href.replace(/.*\?/,"").replace(/action=([^&]*)/,"")+"&pp_ajax_items_metabox=1",function(t){if(-1!=t.indexOf("replace-id")){var n=e.parseJSON(t),a=document.getElementById(n["replace-id"]),i=document.createElement("div"),s=document.createElement("div");n.markup&&a&&(s.innerHTML=n.markup?n.markup:"",a.parentNode.insertBefore(i,a),i.parentNode.removeChild(a),i.parentNode.insertBefore(s,i),i.parentNode.removeChild(i),e("span.add-to-menu img.waiting").hide())}}),!1})},processQuickSearchQueryResponse:function(t,n,a){var i,s,r,c={},u=document.getElementById("nav-menu-meta"),o=new RegExp("menu-item\\[([^\\]]*)","g"),l=e("<div>").html(t).find("li");if(!l.length)return e(".categorychecklist",a).html("<li><p>"+ppItems.noResultsFound+"</p></li>"),void e(".spinner",a).hide();l.each(function(){if(r=e(this),(i=o.exec(r.html()))&&i[1]){for(s=i[1];u.elements["menu-item["+s+"][menu-item-type]"]||c[s];)s--;c[s]=!0,s!=i[1]&&r.html(r.html().replace(new RegExp("menu-item\\["+i[1]+"\\]","g"),"menu-item["+s+"]"))}}),e(".categorychecklist",a).html(l),e(".spinner",a).hide()}};e(document).ready(function(){wpNavMenu.init()})}(jQuery);